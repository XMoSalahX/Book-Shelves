(this["webpackJsonpnd0191-myreads-starter"]=this["webpackJsonpnd0191-myreads-starter"]||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(11),s=n.n(a),r=(n(16),n(17),n(8)),o=n(4),i=n(5),l=n.n(i),u=n(7),j="https://reactnd-books-api.udacity.com",d=localStorage.token;d||(d=localStorage.token=Math.random().toString(36).substr(-8));var b={Accept:"application/json",Authorization:d},h=function(){return fetch("".concat(j,"/books"),{headers:b}).then((function(e){return e.json()})).then((function(e){return e.books}))},O=function(e,t){return fetch("".concat(j,"/search"),{method:"POST",headers:Object(u.a)(Object(u.a)({},b),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e,maxResults:t})}).then((function(e){return e.json()})).then((function(e){return e.books}))},f=n(1);var x=function(e){var t=e.dest,n=e.reloadNow,c=e.bo;return Object(f.jsxs)("div",{className:"book",children:[Object(f.jsxs)("div",{className:"book-top",children:[Object(f.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(c.imageLinks.thumbnail,")")}}),Object(f.jsx)("div",{className:"book-shelf-changer",children:Object(f.jsxs)("select",{defaultValue:"none",onChange:function(){var e=Object(r.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(s=c,r=a.target.value,fetch("".concat(j,"/books/").concat(s.id),{method:"PUT",headers:Object(u.a)(Object(u.a)({},b),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:r})}).then((function(e){return e.json()}))).then((function(){t&&n()}));case 2:case"end":return e.stop()}var s,r}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(f.jsx)("option",{value:"none",disabled:!0,children:"Move to..."}),Object(f.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(f.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(f.jsx)("option",{value:"read",children:"Read"}),Object(f.jsx)("option",{value:"none",children:"None"})]})})]}),Object(f.jsx)("div",{className:"book-title",children:c.title}),c.authors.map((function(e,t){return Object(f.jsx)("div",{className:"book-authors",children:e},t)}))]})};var p=function(e){var t=e.name,n=e.data,c=e.reloadNow;return Object(f.jsx)("div",{children:Object(f.jsxs)("div",{className:"bookshelf",children:[Object(f.jsx)("h2",{className:"bookshelf-title",children:t}),Object(f.jsx)("div",{className:"bookshelf-books",children:Object(f.jsx)("ol",{className:"books-grid",children:n.map((function(e){return Object(f.jsx)(x,{dest:!0,reloadNow:c,bo:e},e.id)}))})})]})})},v=n(6),m=function(){return Object(f.jsx)("div",{className:"open-search",children:Object(f.jsx)(v.b,{to:"/search",children:"Add a book"})})},k=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)([]),i=Object(o.a)(s,2),u=i[0],j=i[1],d=Object(c.useState)([]),b=Object(o.a)(d,2),O=b[0],x=b[1];function v(){return(v=Object(r.a)(l.a.mark((function e(){var t,n,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return t=e.sent,e.next=5,t.filter((function(e){return"currentlyReading"===e.shelf}));case 5:return n=e.sent,a(n),e.next=9,t.filter((function(e){return"wantToRead"===e.shelf}));case 9:return c=e.sent,j(c),e.next=13,t.filter((function(e){return"read"===e.shelf}));case 13:s=e.sent,x(s);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){0===n.length&&function(){v.apply(this,arguments)}()})),Object(f.jsxs)("div",{className:"list-books",children:[Object(f.jsx)("div",{className:"list-books-title",children:Object(f.jsx)("h1",{children:"MyReads"})}),Object(f.jsxs)("div",{className:"list-books-content",children:[0!==n.length?Object(f.jsx)(p,{name:"Currently Reading",data:n,reloadNow:function(){a([])}}):Object(f.jsx)(f.Fragment,{}),0!==u.length?Object(f.jsx)(p,{name:"Want to Read",data:u,reloadNow:function(){a([])}}):null,0!==O.length?Object(f.jsx)(p,{dest:!0,name:"Read",data:O,reloadNow:function(){a([])}}):null]}),Object(f.jsx)(m,{})]})},N=n(2),g=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1];function s(){return(s=Object(r.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t.target.value||""===t.target.value){e.next=5;break}return e.next=3,O(t.target.value,20);case 3:void 0!==(n=e.sent)&&a(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(f.jsxs)("div",{className:"search-books",children:[Object(f.jsxs)("div",{className:"search-books-bar",children:[Object(f.jsx)(v.b,{to:"/",className:"close-search",children:"Close"}),Object(f.jsx)("div",{className:"search-books-input-wrapper",children:Object(f.jsx)("input",{type:"text",placeholder:"Search by title, author, or ISBN",onChange:function(e){!function(e){s.apply(this,arguments)}(e)}})})]}),Object(f.jsx)("div",{className:"search-books-results",children:Object(f.jsx)("ol",{className:"books-grid",children:n.error?Object(f.jsx)("div",{children:"Your Book not found"}):n.map((function(e){return Object(f.jsx)(x,Object(u.a)({},e),e.id)}))})})]})};var y=function(){return Object(f.jsxs)(N.c,{children:[Object(f.jsx)(N.a,{path:"/",element:Object(f.jsx)(k,{})}),Object(f.jsx)(N.a,{path:"/search",element:Object(f.jsx)(g,{})})]})};s.a.render(Object(f.jsx)(v.a,{children:Object(f.jsx)(y,{})}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.643b2d05.chunk.js.map